<div class="row">
    <!----------------Left Side----------------------->
    <div class="col s2">
        <configFilter [projectID]="projectID"></configFilter>
    </div>

    <!-----------------Middle------------------------->
    <div class="col s8">
        <div class="row">
            <div class="col s10">
                <h4>{{project.name}}</h4>
            </div>
            <div class="col s2">
                <button *ngIf="chosenConfig === null" class="btn grey darken-3 top_space tooltipped modal-trigger" data-position="left" data-delay="50" data-tooltip="Add new configuration set" (click)="openAddConfigSetModal()" data-target="configSetModal">Add</button>
            </div>
        </div>
        <hr>
        <div *ngIf="chosenConfig === null" class="center-align">
            <h5>Configurations:</h5>

            <div *ngIf="view == 0">
                <div class="flex_conti" *ngIf="(configSets | async)?.length > 0">
                    <div class="card grey lighten-1 card_space hoverable" *ngFor="let set of configSets | async | projects: searchText">
                        <div class="card-content pointer" (click)="chooseConfig(set)">
                            <span class="card-title">{{set.name}}</span>
                            <p class="">{{set.description}}</p>
                        </div>

                        <div class="card-action">
                            <a (click)="deleteConfigSet(set._id, set.name)" class="secondary-content right"><i class="material-icons grey-text text-darken-2 pointer">delete</i></a>
                            <a (click)="goToConfig(set._id)" class="secondary-content right"><i class="material-icons grey-text text-darken-2 pointer">edit</i></a>
                        </div>
                    </div>
                </div>
            </div>

            <div *ngIf="view == 1">
                <table class="highlight">
                    <thead>
                    <tr>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Actions</th>
                    </tr>
                    </thead>

                    <tbody>
                    <tr *ngFor="let set of configSets | async | projects: searchText">
                        <td (click)="chooseConfig(set)" class="pointer">{{set.name}}</td>
                        <td (click)="chooseConfig(set)" class="pointer">{{set.description}}</td>
                        <td>
                            <a (click)="goToConfig(set._id)"><i class="material-icons grey-text text-darken-2 pointer">edit</i></a>
                            <a (click)="deleteConfigSet(set._id, set.name)"><i class="material-icons grey-text text-darken-2 pointer">delete</i></a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <span *ngIf="(configSets | async)?.length < 1" class="">No configs to display</span>
        </div>


        <div *ngIf="chosenConfig != null">
            <div class="row">
                <div class="col s10">
                    <h5>{{chosenConfig.name}}  <a (click)="goToConfig(chosenConfig._id)" class="pointer"><i class="material-icons grey-text text-darken-2 pointer">edit</i></a></h5>
                </div>
                <div class="col s2">
                    <button class="btn grey darken-3" (click)="chosenConfig = null">Change</button>
                </div>
            </div>
            <table class="highlight">
                <thead>
                <tr>
                    <th>Parameter</th>
                    <th>Value</th>
                </tr>
                </thead>

                <tbody>
                <tr *ngFor="let paramSet of chosenConfig.params">
                    <td>{{paramSet.param}}</td>
                    <td>{{paramSet.value}}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!---------------Right side----------------------------->
    <div class="col s2">
        <div id="dropCard" class="card amber accent-2 dropCard" (dragleave)="onDragLeave($event)" (dragover)="onDragOver($event)" (drop)="onDrop($event)">
            <div class="card-content">
                <span class="card-title">Drop Config</span>
                <p>Drop a config file here to create a new config</p>
            </div>
            <div class="card-action">
            </div>
        </div>
        <div class="card grey lighten-3">
            <div class="card-content">
                <span class="card-title">View</span>
                <form action="#">
                    <p>
                        <input name="group1" type="radio" id="card" (change)="changeView(0)"/>
                        <label for="card" class="grey-text">Card</label>
                    </p>
                    <p>
                        <input name="group1" type="radio" id="list" checked (change)="changeView(1)"/>
                        <label for="list">List</label>
                    </p>
                </form>
            </div>
        </div>
    </div>
</div>




<div id="configSetModal" class="modal">
    <div class="modal-content">
        <h4>Add new configuration set</h4>
        <div class="input-field">
            <input placeholder="Name" id="name" type="text" class="validate" #name>
            <label for="name">Name</label>
        </div>
        <div class="input-field">
            <textarea placeholder="Description" id="desc" type="text" class="materialize-textarea" #desc></textarea>
            <label for="desc">Description</label>
        </div>
    </div>
    <div class="modal-footer">
        <button class="modal-action waves-effect waves-green btn-flat" (click)="createConfigSet(name.value, desc.value, [])">Create</button>
    </div>
</div>