<div class="row">
    <!----------------Left Side----------------------->
    <div class="col s12 l2">
        <configFilter [mappingID]="project.mappingID" *ngIf="project.mappingID && project.mappingID != ''"></configFilter>
    </div>

    <!-----------------Middle------------------------->
    <div class="col s12 l8">
        <div class="row">
            <div class="col s12 m10 l10">
                <h4>{{project.name}}</h4>
            </div>
            <div class="col s12 m2 l2">
                <button class="btn grey darken-3 top_space tooltipped modal-trigger" data-position="left" data-delay="50" data-tooltip="Add new configuration set" data-target="configSetModal" *ngIf="isOwner(project.creator)">Add</button>
            </div>
        </div>
        <hr>
        <div class="center-align">
            <dynTable [input]="filteredConfigs" [initialColumns]="initialColumns" (called)="handleDynTableCall($event)" (clickedOnColumn)="onTableRowClicked($event)" [options]="tableOptions"></dynTable>
            <span *ngIf="(filteredConfigs)?.length < 1" class="">No configs to display</span>
        </div>
    </div>

    <!---------------Right side----------------------------->
    <div class="col s12 l2">
        <div id="dropCard" class="card amber accent-2 dropCard" (dragleave)="onDragLeave($event)" (dragover)="onDragOver($event)" (drop)="onDrop($event)" *ngIf="isOwner(project.creator)">
            <div class="card-content">
                <span class="card-title">Drop Config</span>
                <p>Drop a config file here to create a new config</p>
            </div>
            <div class="card-action">
            </div>
        </div>
        <div class="card amber accent-2">
            <div class="card-content">
                <span class="card-title">Related Mapping</span>
                <p *ngIf="project.mappingID === ''">No mapping assigned yet.</p>
                <p [routerLink]="['/mapping', mapping?._id]" class="pointer">{{mapping?.name}}</p>
            </div>
            <div class="card-action">
                <button class="btn grey darken-1 waves-effect s_top_space" (click)="updateMapping()" *ngIf="project.mappingID && mapping">Update</button>
                <button class="btn grey darken-1 waves-effect s_top_space" (click)="createMapping()" *ngIf="isOwner(project.creator) && (!project.mappingID || project.mappingID === '')">Create</button>
            </div>
        </div>
    </div>
</div>


<div id="configSetModal" class="modal">
    <div class="modal-content">
        <h4>Add new configuration set</h4>
        <div class="input-field">
            <input placeholder="Name" id="name" type="text" class="validate" #name>
            <label for="name">Name</label>
        </div>
        <div class="input-field">
            <textarea placeholder="Description" id="desc" type="text" class="materialize-textarea" #desc></textarea>
            <label for="desc">Description</label>
        </div>
    </div>
    <div class="modal-footer">
        <button class="modal-action waves-effect waves-green btn-flat" (click)="createConfigSet(name.value, desc.value, [])">Create</button>
    </div>
</div>

<div id="configSetEditModal" class="modal">
    <div class="modal-content">
        <h4>Edit Config</h4>
        <div class="input-field">
            <input placeholder="Name" id="editName" type="text" class="validate" #editName>
            <label for="name">Name</label>
        </div>
        <div class="input-field">
            <textarea placeholder="Description" id="editDesc" type="text" class="materialize-textarea" #editDesc></textarea>
            <label for="desc">Description</label>
        </div>
    </div>
    <div class="modal-footer">
        <button class="modal-action waves-effect waves-green btn-flat" (click)="editChosenConfig(editName.value, editDesc.value)">Edit</button>
    </div>
</div>